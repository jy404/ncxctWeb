<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>市政项目管理</title>
		<link href="css/style.css" type="text/css" rel="stylesheet" />
		<link href="css/jquery.toast.css" type="text/css" rel="stylesheet" />
		<script type="text/javascript" src="js/jquery-3.2.1.min.js"></script>
		<script type="text/javascript" src="js/js.js"></script>
		<script type="text/javascript" src="js/AjaxRequest.js"></script>
		<script type="text/javascript" src="js/json2.js"></script>
		<script type="text/javascript" src="js/GetData.js"></script>
		<script type="text/javascript" src="js/paging.js"></script>
		<script type="text/javascript" src="js/PluginFun.js"></script>
		<script type="text/javascript" src="js/jquery.toast.js"></script>

		<script type="text/javascript">
			var currentpage = 1;
			var pagesize = 10;
			var moduleId = 0;
			var projecttype = "CITY";
			var data = {
				"projectType": projecttype
			};
			$(function() {
				moduleId = $.getUrlParam("moduleId");
				$(".addBb").click(function() {
					location.href = "030601.html?moduleId=" + moduleId;
				});
				GetProjectList(currentpage, pagesize, data, "projectList", $("#fj_page"), true, "/api/project/list");
				$("#searchBtn").click(function() {
					var projectName = $("#txtProjectName").val();
					var startTime = $("#txtstartTime").val();
					var projectNo = $("#txtProjectNo").val();
					//if(projectName != undefined && projectName != "")
					data["name"] = projectName;
					//if(startTime != undefined && startTime != "")
					data["startTime"] = startTime;
					//if(projectNo != undefined && projectNo != "")
					data["projectNo"] = projectNo;
					GetProjectList(currentpage, pagesize, data, "projectList", $("#fj_page"), true, "/api/project/list");
				})
				$("#resetBtn").click(function() {
					$("#txtProjectName").val('');
					$("#txtStartTime").val('');
					$("#txtProjectNo").val('');
					$("#txtOrgName").val('');
					$("#txtPersonName").val('');
					data = {
						"projectType": projecttype
					};
					GetProjectList(currentpage, pagesize, data, "projectList", $("#fj_page"), true, "/api/project/list");
				})
				$(".exportBtn").click(function() {
					var parameter = "projectType=CITY";
					
					if ($("#txtProjectNo").val() != "" && $("#txtProjectNo").val() != undefined)
						parameter += "&projectNo=" + $("#txtProjectNo").val();
					if ($("#txtProjectName").val() != "" && $("#txtProjectName").val() != undefined)
						parameter += "&name=" + $("#txtProjectName").val();
					if ($("#status").val() != "" && $("#status").val() != undefined)
						parameter += "&step=" + $("#status").val();
					if ($("#txtStartTime").val() != "" && $("#txtStartTime").val() != undefined)
						parameter += "&startTime=" + $("#txtStartTime").val();
					if ($("#endTime").val() != "" && $("#endTime").val() != undefined)
						parameter += "&completedTime=" + $("#endTime").val();
					window.open(domain + "/api/project/list/export?" + parameter);
				})
			})
		</script>
	</head>

	<body>

		<div class="title">
			<div class="page">
				<b>当前位置：</b>
				<span>> 首页</span>
				<span>> 项目综合管理</span>
				<span>> 市政项目管理</span>
			</div>
		</div>
		<div class="szxm">
			<h2 class="szxmTitle">市政项目</h2>
			<a href="#" target="bodyRight" class="addBb">添加新项目</a>
			<div class="szxmSerach">
				<div class="szxmSerachList">
					<div class="szxmSerachTitle">
						<span>项目名称</span>
						<input type="text" id="txtProjectName" class="szxmSerachTypeSelect" />
					</div>
					<div class="szxmSerachTitle">
						<span>时间</span>
						<input type="text" id="txtStartTime" class="szxmSerachTypeSelect" />
					</div>
					<div class="szxmSerachTitle">
						<span>项目编号</span>
						<input type="text" id="txtProjectNo" class="szxmSerachTypeSelect" />
					</div>
					<div class="szxmSerachTitle">
						<span>责任部门</span>
						<input type="text" id="txtOrgName" class="szxmSerachTypeSelect" />
					</div>
					<div class="szxmSerachTitle">
						<span>责任人</span>
						<input type="text" id="txtPersonName" class="szxmSerachTypeSelect" />
					</div>
				</div>
				<div class="szxmSerachBtn">
					<a id="searchBtn" href="#" class="szxmSerachBtn1">搜索</a>
					<a id="resetBtn" href="#" class="szxmSerachreset">清空</a>
				</div>
			</div>
			<a id="exportBtn1" class="exportBtn">导出excel表格</a>
			<div class="szxmTable">
				<table cellpadding="0" cellspacing="0" id="projectList">
					<tr>
						<td width="5%">序号</td>
						<td width="10%">项目编号</td>
						<td width="10%">项目名称</td>
						<td width="10%">项目地址</td>
						<td width="9%">责任人</td>
						<td width="9%">总金额</td>
						<td width="10%">开工时间</td>
						<td width="9%">结束时间</td>
						<td width="5%">项目状态</td>
						<td width="12%">操作</td>
					</tr>

				</table>
			</div>
			<div class="page_div fy" id="fj_page">

			</div>
		</div>
	</body>

</html>